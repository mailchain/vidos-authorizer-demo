/* ============================================
   Progress Indicator Animations
   ============================================ */

/* --- Step 1: Create - Geometric Assembly --- */
/* Shapes orbit chaotically then snap into hexagonal formation */

@keyframes orbit-shape-1 {
	0%,
	100% {
		transform: rotate(0deg) translateX(20px) rotate(0deg);
	}
	25% {
		transform: rotate(90deg) translateX(24px) rotate(-90deg);
	}
	50% {
		transform: rotate(180deg) translateX(18px) rotate(-180deg);
	}
	75% {
		transform: rotate(270deg) translateX(22px) rotate(-270deg);
	}
}

@keyframes orbit-shape-2 {
	0%,
	100% {
		transform: rotate(60deg) translateX(22px) rotate(-60deg);
	}
	25% {
		transform: rotate(150deg) translateX(18px) rotate(-150deg);
	}
	50% {
		transform: rotate(240deg) translateX(24px) rotate(-240deg);
	}
	75% {
		transform: rotate(330deg) translateX(20px) rotate(-330deg);
	}
}

@keyframes orbit-shape-3 {
	0%,
	100% {
		transform: rotate(120deg) translateX(18px) rotate(-120deg);
	}
	25% {
		transform: rotate(210deg) translateX(22px) rotate(-210deg);
	}
	50% {
		transform: rotate(300deg) translateX(20px) rotate(-300deg);
	}
	75% {
		transform: rotate(30deg) translateX(24px) rotate(-30deg);
	}
}

@keyframes orbit-shape-4 {
	0%,
	100% {
		transform: rotate(180deg) translateX(24px) rotate(-180deg);
	}
	25% {
		transform: rotate(270deg) translateX(20px) rotate(-270deg);
	}
	50% {
		transform: rotate(360deg) translateX(22px) rotate(-360deg);
	}
	75% {
		transform: rotate(90deg) translateX(18px) rotate(-90deg);
	}
}

@keyframes orbit-shape-5 {
	0%,
	100% {
		transform: rotate(240deg) translateX(20px) rotate(-240deg);
	}
	25% {
		transform: rotate(330deg) translateX(24px) rotate(-330deg);
	}
	50% {
		transform: rotate(60deg) translateX(18px) rotate(-60deg);
	}
	75% {
		transform: rotate(150deg) translateX(22px) rotate(-150deg);
	}
}

@keyframes orbit-shape-6 {
	0%,
	100% {
		transform: rotate(300deg) translateX(22px) rotate(-300deg);
	}
	25% {
		transform: rotate(30deg) translateX(18px) rotate(-30deg);
	}
	50% {
		transform: rotate(120deg) translateX(24px) rotate(-120deg);
	}
	75% {
		transform: rotate(210deg) translateX(20px) rotate(-210deg);
	}
}

/* Shape snap-to-position for completed state */
@keyframes snap-to-hex {
	0% {
		opacity: 1;
	}
	80% {
		opacity: 1;
		transform: rotate(var(--snap-angle)) translateX(20px)
			rotate(calc(-1 * var(--snap-angle)));
	}
	100% {
		opacity: 1;
		transform: rotate(var(--snap-angle)) translateX(16px)
			rotate(calc(-1 * var(--snap-angle))) scale(0.8);
	}
}

/* Geometric shape pulse when locked */
@keyframes shape-pulse {
	0%,
	100% {
		opacity: 0.7;
	}
	50% {
		opacity: 1;
	}
}

.geo-shape {
	position: absolute;
	width: 6px;
	height: 6px;
	top: 50%;
	left: 50%;
	margin: -3px 0 0 -3px;
	pointer-events: none;
}

.geo-shape-1 {
	animation: orbit-shape-1 3s ease-in-out infinite;
}
.geo-shape-2 {
	animation: orbit-shape-2 3.5s ease-in-out infinite;
}
.geo-shape-3 {
	animation: orbit-shape-3 2.8s ease-in-out infinite;
}
.geo-shape-4 {
	animation: orbit-shape-4 3.2s ease-in-out infinite;
}
.geo-shape-5 {
	animation: orbit-shape-5 2.6s ease-in-out infinite;
}
.geo-shape-6 {
	animation: orbit-shape-6 3.8s ease-in-out infinite;
}

/* --- Step 2: Authorization - Cryptographic Hash Ring --- */

@keyframes rotate-hash-ring {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
}

@keyframes counter-rotate {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(-360deg);
	}
}

@keyframes char-scramble {
	0%,
	10% {
		content: "A";
	}
	10%,
	20% {
		content: "7";
	}
	20%,
	30% {
		content: "F";
	}
	30%,
	40% {
		content: "3";
	}
	40%,
	50% {
		content: "E";
	}
	50%,
	60% {
		content: "9";
	}
	60%,
	70% {
		content: "B";
	}
	70%,
	80% {
		content: "2";
	}
	80%,
	90% {
		content: "D";
	}
	90%,
	100% {
		content: "5";
	}
}

@keyframes char-scramble-alt {
	0%,
	10% {
		content: "8";
	}
	10%,
	20% {
		content: "C";
	}
	20%,
	30% {
		content: "1";
	}
	30%,
	40% {
		content: "6";
	}
	40%,
	50% {
		content: "0";
	}
	50%,
	60% {
		content: "4";
	}
	60%,
	70% {
		content: "F";
	}
	70%,
	80% {
		content: "A";
	}
	80%,
	90% {
		content: "3";
	}
	90%,
	100% {
		content: "E";
	}
}

@keyframes glow-pulse {
	0%,
	100% {
		text-shadow:
			0 0 4px currentColor,
			0 0 8px currentColor;
		opacity: 0.8;
	}
	50% {
		text-shadow:
			0 0 8px currentColor,
			0 0 16px currentColor;
		opacity: 1;
	}
}

.hash-ring {
	position: absolute;
	width: 56px;
	height: 56px;
	top: 50%;
	left: 50%;
	margin: -28px 0 0 -28px;
	animation: rotate-hash-ring 8s linear infinite;
	pointer-events: none;
}

.hash-char {
	position: absolute;
	font-family: ui-monospace, monospace;
	font-size: 8px;
	font-weight: 600;
	color: var(--foreground);
	animation:
		glow-pulse 1.5s ease-in-out infinite,
		counter-rotate 8s linear infinite;
}

.hash-char::before {
	content: "0";
	animation: char-scramble 0.8s steps(1) infinite;
}

.hash-char:nth-child(odd)::before {
	content: "A";
	animation: char-scramble-alt 0.6s steps(1) infinite;
}

/* Position characters in a circle */
.hash-char:nth-child(1) {
	top: 0;
	left: 50%;
	transform: translateX(-50%);
}
.hash-char:nth-child(2) {
	top: 4px;
	left: 75%;
}
.hash-char:nth-child(3) {
	top: 15%;
	left: 92%;
}
.hash-char:nth-child(4) {
	top: 35%;
	left: 100%;
	transform: translateX(-100%);
}
.hash-char:nth-child(5) {
	top: 50%;
	left: 100%;
	transform: translate(-100%, -50%);
}
.hash-char:nth-child(6) {
	top: 65%;
	left: 100%;
	transform: translateX(-100%);
}
.hash-char:nth-child(7) {
	top: 85%;
	left: 92%;
}
.hash-char:nth-child(8) {
	bottom: 4px;
	left: 75%;
}
.hash-char:nth-child(9) {
	bottom: 0;
	left: 50%;
	transform: translateX(-50%);
}
.hash-char:nth-child(10) {
	bottom: 4px;
	left: 25%;
	transform: translateX(-100%);
}
.hash-char:nth-child(11) {
	top: 85%;
	left: 8%;
	transform: translateX(-100%);
}
.hash-char:nth-child(12) {
	top: 65%;
	left: 0;
}
.hash-char:nth-child(13) {
	top: 50%;
	left: 0;
	transform: translateY(-50%);
}
.hash-char:nth-child(14) {
	top: 35%;
	left: 0;
}
.hash-char:nth-child(15) {
	top: 15%;
	left: 8%;
}
.hash-char:nth-child(16) {
	top: 4px;
	left: 25%;
}

/* Stagger animation delays */
.hash-char:nth-child(1) {
	animation-delay: 0s, 0s;
}
.hash-char:nth-child(2) {
	animation-delay: 0.1s, 0s;
}
.hash-char:nth-child(3) {
	animation-delay: 0.2s, 0s;
}
.hash-char:nth-child(4) {
	animation-delay: 0.3s, 0s;
}
.hash-char:nth-child(5) {
	animation-delay: 0.4s, 0s;
}
.hash-char:nth-child(6) {
	animation-delay: 0.5s, 0s;
}
.hash-char:nth-child(7) {
	animation-delay: 0.6s, 0s;
}
.hash-char:nth-child(8) {
	animation-delay: 0.7s, 0s;
}
.hash-char:nth-child(9) {
	animation-delay: 0.8s, 0s;
}
.hash-char:nth-child(10) {
	animation-delay: 0.9s, 0s;
}
.hash-char:nth-child(11) {
	animation-delay: 1s, 0s;
}
.hash-char:nth-child(12) {
	animation-delay: 1.1s, 0s;
}
.hash-char:nth-child(13) {
	animation-delay: 1.2s, 0s;
}
.hash-char:nth-child(14) {
	animation-delay: 1.3s, 0s;
}
.hash-char:nth-child(15) {
	animation-delay: 1.4s, 0s;
}
.hash-char:nth-child(16) {
	animation-delay: 1.5s, 0s;
}

/* --- Step 3: Result - Holographic Seal --- */

@keyframes holographic-sweep {
	0% {
		background-position: -200% center;
		opacity: 0;
	}
	10% {
		opacity: 1;
	}
	100% {
		background-position: 200% center;
		opacity: 1;
	}
}

@keyframes holographic-shimmer {
	0%,
	100% {
		background-position: 0% center;
		opacity: 0.7;
	}
	50% {
		background-position: 100% center;
		opacity: 1;
	}
}

@keyframes seal-stamp {
	0% {
		transform: scale(1.3);
		opacity: 0;
	}
	50% {
		transform: scale(0.95);
		opacity: 1;
	}
	70% {
		transform: scale(1.05);
	}
	100% {
		transform: scale(1);
		opacity: 1;
	}
}

.holographic-overlay {
	position: absolute;
	inset: -2px;
	border-radius: 50%;
	background: linear-gradient(
		105deg,
		transparent 20%,
		oklch(0.95 0 0 / 0.3) 30%,
		oklch(1 0 0 / 0.6) 40%,
		oklch(0.95 0 0 / 0.4) 50%,
		oklch(1 0 0 / 0.6) 60%,
		oklch(0.95 0 0 / 0.3) 70%,
		transparent 80%
	);
	background-size: 300% 100%;
	mix-blend-mode: overlay;
	pointer-events: none;
	animation:
		holographic-sweep 1.2s ease-out forwards,
		holographic-shimmer 3s ease-in-out 1.2s infinite;
}

.seal-enter {
	animation: seal-stamp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Monochromatic seal glow effect */
@keyframes seal-glow {
	0%,
	100% {
		box-shadow:
			0 0 8px oklch(0.5 0 0 / 0.5),
			0 0 20px oklch(0.5 0 0 / 0.2);
	}
	50% {
		box-shadow:
			0 0 12px oklch(0.6 0 0 / 0.6),
			0 0 28px oklch(0.5 0 0 / 0.3);
	}
}

.holographic-glow {
	animation: seal-glow 2s ease-in-out infinite;
}

/* --- Connecting Lines: Encryption Stream --- */

@keyframes encryption-flow {
	0% {
		transform: translateX(0);
		opacity: 0;
	}
	10% {
		opacity: 1;
	}
	70% {
		opacity: 1;
	}
	90% {
		opacity: 0.5;
	}
	100% {
		transform: translateX(48px);
		opacity: 0;
	}
}

@keyframes decrypt-reveal {
	0%,
	60% {
		content: "█";
		opacity: 0.4;
	}
	70% {
		content: "▓";
		opacity: 0.6;
	}
	85% {
		content: "░";
		opacity: 0.8;
	}
	100% {
		content: "·";
		opacity: 1;
	}
}

.encryption-line {
	position: relative;
	width: 48px;
	height: 8px;
	margin: 0 8px;
	margin-bottom: 20px;
	overflow: hidden;
}

.encryption-line-bg {
	position: absolute;
	inset: 0;
	top: 50%;
	height: 2px;
	transform: translateY(-50%);
	background: var(--muted);
	border-radius: 1px;
}

.encryption-line-progress {
	position: absolute;
	top: 50%;
	left: 0;
	height: 2px;
	transform: translateY(-50%);
	background: var(--primary);
	border-radius: 1px;
	transition: width 0.5s ease-out;
}

.encryption-particle {
	position: absolute;
	top: 50%;
	left: 0;
	transform: translateY(-50%);
	font-family: ui-monospace, monospace;
	font-size: 7px;
	line-height: 1;
	color: var(--foreground);
	animation: encryption-flow 1.5s linear infinite;
	pointer-events: none;
}

.encryption-particle::before {
	content: "█";
	animation: decrypt-reveal 1.5s linear infinite;
}

.encryption-particle:nth-child(2) {
	animation-delay: 0.3s;
}
.encryption-particle:nth-child(2)::before {
	animation-delay: 0.3s;
}
.encryption-particle:nth-child(3) {
	animation-delay: 0.6s;
}
.encryption-particle:nth-child(3)::before {
	animation-delay: 0.6s;
}
.encryption-particle:nth-child(4) {
	animation-delay: 0.9s;
}
.encryption-particle:nth-child(4)::before {
	animation-delay: 0.9s;
}
.encryption-particle:nth-child(5) {
	animation-delay: 1.2s;
}
.encryption-particle:nth-child(5)::before {
	animation-delay: 1.2s;
}

/* Completed line - particles flow faster and are "decrypted" */
.encryption-line.completed .encryption-particle {
	animation-duration: 1s;
}

.encryption-line.completed .encryption-particle::before {
	animation-duration: 1s;
}

/* Pending line - no animation */
.encryption-line.pending .encryption-particle {
	display: none;
}
